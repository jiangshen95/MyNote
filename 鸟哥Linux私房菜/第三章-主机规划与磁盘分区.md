# Linux与硬件的搭配
> 在Linux系统中，每个装置都被当成一个文件来对待，硬件装置文件/dev/*

* 磁盘分区
  * IDE介面  
    通常主机会提供两个IDE介面，每个IED排线可以连接两个IDE装置，因此通常最多可以连接到四个IDE装置。如果有一个光盘设备，最多可以连三个。每条排线上的IDE装置可以被区分为Master与Slave
    IDE\Jumper|Master|Slave
    ---|:--:|---
    IDE1(Primary)|/dev/hda|/dev/hdb
    IDE2(Secondary)|/dev/hdc|/dev/hdd
  * SATA介面：SATA/U盘/SCSI等磁盘介面都是SCSI模块来驱动的，因此这些介面的磁碟装置档名都是/dev/sd[a-p]的格式。  
  与IDE介面不同的是，SATA/U盘介面的磁碟根本没有一定的顺序，根据Linux核心侦测到的磁碟的顺序决定档名。
  * 磁碟的第一个磁区主要记录了：
      * 主要启动记录区(Master Boot Record, MBR)：可以安装启动管理程序的地方，有446 bytes
      * 分割表：记录整颗磁盘分割的状态，有64 bytes
  > MBR很重要，当系统启动的时候会主动去读取这个区块的内容，这样系统才会知道你的程序放在哪里且该如何进行启动。如果要安装多重启动的系统，MBR这个区块的管理就非常重要。
 # 磁盘分区表  
 * 磁盘分区表  
    利用参考对照磁柱号码的方式来处理，在分割表所在的64bytes的容量中，总共分为四组记录区，每个记录区记录了该区段的起始与结束的磁柱号码。  
    P1:/dev/hda1  P2:/dev/hda2...  
    四个分割的记录被称为主要(Primary)或延申(Extended)分割槽  
    分割槽的最小单位为磁柱  
    扩展分配：利用额外的磁区来记录分割信息，扩展分配本身不能被拿来格式化。  
    扩展分配继续分割出来的分割槽——逻辑分割槽  
    P1:/dev/hda1 P2:/dev/hda2 L1:/dev/hda5 L2:/dev/hda6  前面四个号码保留给Primary或Extended用，逻辑分割槽的装置名称号码就由5号开始。
      * 主要分割与扩展分配最多可以有四笔(硬盘的限制)
      * 扩展分配最多只能有一个(操作系统的限制)
      * 逻辑分割是由扩展分配持续切割出来的分割槽；
      * 能够被格式化后，作为数据存取的分割槽为主要分割与逻辑分割。扩展分配无法格式化；
      * 逻辑分割的数量依操作系统而不同，在Linux系统中，IDE硬盘最多有59个逻辑分割(5号到63号)， SATA硬盘则有11个逻辑分割(5号到15号)。
* 启动流程与主要启动记录区(MBR)
    1. BIOS：启动主动的韧体，会认识第一个可启动的装置
    2. MBR：第一个可启动装置的第一个磁区内的主要启动记录区块，内含启动管理程序
    3. 启动管理程序(boot loader)：一支可读取核心文件来运行的软件
    4. 核心文件：开始操作系统的功能...  
 
    boot loader主要任务：
    * 提供菜单：使用者可以选择不同的启动项目，这也是多重启动的重要功能
    * 加载核心文件：直接指向可启动的程序区段来开始操作系统
    * 转交其他loader：将启动管理功能转交给其他loader负责  
      启动管理程序除了可以安装在MBR之外，还可以安装在每个分割槽的启动磁区(boot sector)
    * loader只会认识自己的分割槽内的可启动核心文件，以及其他loader而已
* Linux安装模式下，磁盘分区的选择
      * 目录树结构：根目录/
      * 文件系统与目录树的关系（挂载）  
        挂载就是利用一个目录当成进入点，将磁盘分区槽的数据放置在该目录下，进入该目录就可以读取分割槽。进入点的目录称为挂载点。  
        根目录一定需要挂载到某个分割槽，其他目录则可依使用者自己的需求来给予挂载到不同分割槽

# 安装Linux前的规则
* 主机硬盘上的主要规划
    * 最简单的分割方法，仅分割出根目录与内存置换空间（/ & swap）即可。再预留一些剩余的磁盘空间。
    * /boot /usr /home /var /Swap